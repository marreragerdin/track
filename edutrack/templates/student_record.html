{% extends 'base.html' %}
{% load static %}
{% block title %}Student Record{% endblock %}

{% block content %}
    <h2>Student Record</h2>
<a href="{% url 'add' %}" class="btn btn-primary">Add Student</a>

<div class = "table-responsive">
<table class="table table-hover">
  <tbody>
    <tr>
      <th scope="col">Student ID</th>
      <th scope="col">Fullname</th>
      <th scope="col">Grade & Section</th>
      <th scope="col">Gender</th>
       <th scope="col">Age</th>
      <th scope="col">Address</th>
      <th scope="col">Parent/Guardian</th>
      <th scope="col">Parent/Guardian Contact</th>
       <th scope="col">Status</th>
      <th scope="col">Actions</th>
    </tr>
  </tbody>
  {% for student in account%}
  <tr>
    <td>{{ student.student_id}}</td>
    <td>{{ student.fullname}}</td>
    <td>{{ student.grade_and_section}}</td>
    <td>{{ student.gender}}</td>
    <td>{{ student.age}}</td>
    <td>{{ student.address}}</td>
    <td>{{ student.parent}}</td>
    <td>{{ student.parent_contact}}</td>
    <td>{{ student.status}}</td>
    <td>
<button type="button"
        class="btn btn-success me-1"
        data-bs-toggle="modal"
        data-bs-target="#mymodal{{student.id}}">
  <i class="fa-solid fa-circle-info"></i>
</button>

<!--      modal view student-->
  <div class="modal" id ="mymodal{{student.id}}" tabindex="-1" aria-labelledby="mymodalLabel{{student.id}}" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          Student: {{ student.fullname}}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        <ul class="list-unstyled">
          <li>Student ID: <strong> {{ student.student_id}} </strong></li>
          <li>Fullname: <strong> {{ student.fullname}}</strong></li>
          <li>Grade & Section: <strong> {{ student.grade_and_section}}</strong></li>
          <li>Gender: <strong> {{ student.gender}}</strong></li>
          <li>Age: <strong> {{ student.age}}</strong></li>
          <li>Address: <strong> {{ student.address}}</strong></li>
          <li>Parent/Guardian: <strong> {{ student.parent}}</strong></li>
          <li>Parent/Guardian Contact: <strong> {{ student.parent_contact}}</strong></li>
          <li>Status: <strong> {{ student.status}}</strong></li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!--      modal delete student-->
      <a class="btn btn-warning me-1" href="{%url 'edit' student.id%}">
        <i class="fa-solid fa-pen-to-square"></i>
      </a>
      <button type="button" class="btn btn-danger" data-bs-toggle = "modal" data-bs-target="#delete{{student.id}}">
        <i class="fa-solid fa-trash-can"></i>
      </button>
      <div class="modal" id ="delete{{student.id}}" tabindex="-1" aria-labelledby="mymodalLabel{{student.id}}" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          Student: {{ student.fullname}}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this student?</p>
      </div>
     <div class="modal-footer">
  <form action="{% url 'delete' student.id %}" method="POST">
    {% csrf_token %}
    <input type="submit" class="btn btn-danger" value="Delete">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  </form>
</div>

      </div>
    </div>
  </div>
</div>

    </td>
  </tr>
  {%endfor%}
</div>


<script src =  "https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
